import{a as c,c as v}from"../../../../_chunks/chunk-7B7UEHJN.js";import{a as n}from"../../../../_chunks/chunk-OQHS72KN.js";import{a as r,b as m}from"../../../../_chunks/chunk-WRJRVQ7L.js";import{c as i,f as h,g as y}from"../../../../_chunks/chunk-RKUHNEJF.js";var t=h(y(),1);function p(a){var d=new l({element:"#LoginPanel"});a!=null&&a.activated&&(d.form.Username.value=a.activated,d.form.Password.element.getNode().focus())}i(p,"pageInit");var s=class s extends t.PropertyPanel{constructor(o){super(o);this.form=new c(this.idPrefix)}getFormKey(){return c.formKey}loginClick(){if(this.validateForm()){var o=this.getSaveEntity();(0,t.serviceCall)({url:(0,t.resolveUrl)("~/Account/Login"),request:o,onSuccess:i(()=>{this.redirectToReturnUrl()},"onSuccess"),onError:i(e=>{var u,f,g;if(((u=e==null?void 0:e.Error)==null?void 0:u.Code)==="RedirectUserTo"){window.location.href=e.Error.Arguments;return}if((g=(f=e==null?void 0:e.Error)==null?void 0:f.Message)!=null&&g.length){(0,t.notifyError)(e.Error.Message),this.form.Password.element.getNode().focus();return}t.ErrorHandling.showServiceError(e.Error)},"onError")})}}redirectToReturnUrl(){window.location.href=(0,t.getReturnUrl)({purpose:"login"})}renderContents(){let o=this.useIdPrefix();this.element.empty().append(r(m,{children:[r(v,{}),r("div",{class:"s-Panel p-4",children:[r("h5",{class:"text-center my-4",children:n.LoginToYourAccount}),r("form",{id:o.Form,action:"",children:[r("div",{id:o.PropertyGrid}),r("div",{class:"px-field",children:r("a",{class:"float-end text-decoration-none",href:(0,t.resolveUrl)("~/Account/ForgotPassword"),children:n.ForgotPassword})}),r("div",{class:"px-field",children:r("button",{id:o.LoginButton,type:"submit",class:"btn btn-primary my-3 w-100",onClick:e=>{e.preventDefault(),this.loginClick()},children:n.SignInButton})})]})]}),r("div",{class:"text-center mt-2",children:r("a",{class:"text-decoration-none",href:(0,t.resolveUrl)("~/Account/SignUp"),children:n.SignUpButton})})]}))}};i(s,"LoginPanel");var l=s;export{p as default};
//# sourceMappingURL=LoginPage.js.map
